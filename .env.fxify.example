# FXIFY Trading Bot Configuration
# Copy this file to .env.fxify and fill in your values

# ===== MT5 CONNECTION =====
# Your FXIFY MT5 account credentials
MT5_LOGIN=12345678
MT5_PASSWORD=YourPassword123
MT5_SERVER=YourBroker-Demo  # e.g., "FXIFY-Demo" or "FXIFY-Live"
MT5_PATH=  # Optional: Full path to terminal64.exe (leave empty for auto-detect)

# ===== TRADING PARAMETERS =====
SYMBOL=EURUSD  # Forex pair to trade (EURUSD, GBPUSD, XAUUSD, etc.)
TIMEFRAME=15Min  # 1Min, 5Min, 15Min, 30Min, 1H, 4H, 1D
MAGIC_NUMBER=234567  # Unique identifier for bot trades

# ===== FXIFY CHALLENGE RULES =====
# Adjust these based on your FXIFY challenge phase
FXIFY_MAX_DAILY_LOSS_PCT=0.05  # 5% max daily loss (typical)
FXIFY_MAX_TOTAL_LOSS_PCT=0.10  # 10% max total loss (typical)
FXIFY_PROFIT_TARGET_PCT=0.08   # 8% profit target (typical for phase 1)
FXIFY_MAX_SINGLE_TRADE_PROFIT_PCT=0.40  # 40% consistency rule

# ===== RISK MANAGEMENT =====
RISK_PCT=0.01  # Base risk per trade (1% is conservative for prop firm)
RISK_PCT_BASE=0.01  # Risk on normal setups
RISK_PCT_STRONG=0.02  # Risk on strong setups (max 2%)
SLIPPAGE_PIPS=1  # Expected slippage

# ===== ENTRY/EXIT STRATEGY =====
OPPORTUNISTIC_MODE=true  # Use edge-based opportunistic entry
EDGE_BUY_SCORE=60  # Minimum edge score for entry
EDGE_EXIT_SCORE=10  # Exit if edge drops below this
EDGE_CONFIRM_BARS=2  # Bars to confirm entry signal
EDGE_EXIT_CONFIRM_BARS=2  # Bars to confirm exit signal

# ===== TRADING CONTROLS =====
MIN_COOLDOWN_MIN=15  # Minutes between trades
MAX_TRADES_PER_DAY=5  # Max trades per day (conservative)
MIN_EDGE_ATR_PCT=0.03  # Minimum ATR% to trade

# ===== CIRCUIT BREAKER =====
CB_ENABLED=true  # Enable circuit breaker
CB_MAX_LOSS_STREAK=2  # Stop after N losing trades
CB_COOLDOWN_MIN=120  # Cooldown period in minutes

# ===== INDICATOR PARAMETERS =====
RSI_PERIOD=14
ADX_PERIOD=14
ATR_PERIOD=14
SHORT_MA=10  # Short MA period
LONG_MA=25   # Long MA period
TREND_MA=200  # Trend MA period
USE_EMA=true  # Use EMA instead of SMA
ADX_THRESHOLD=20  # Minimum ADX for classic entry
BREAKOUT_LOOKBACK=20
ADX_SLOPE_LOOKBACK=3

# ===== TRAILING STOP =====
TRAIL_ATR_MULT=3.0  # Initial trailing stop (3x ATR)
TRAIL_WIDEN_AFTER_R=1.0  # Widen trail after +1R gain
TRAIL_ABS_WIDEN_TO=4.0  # Widen to 4x ATR

# ===== ADAPTIVE RISK =====
ADX_RISK_THR=25  # ADX threshold for strong setup
ATR_PCT_RISK_THR=0.04  # ATR% threshold for strong setup

# ===== PARTIAL PROFITS =====
PARTIAL_ATR=3.0  # Take partial at 3x ATR gain
WINNER_THRESHOLD_ATR=2.0  # Consider "winner" after 2x ATR
WINNER_WIDEN_MULT=1.2  # Widen trail on winners

# ===== OPTIONAL FILTERS =====
ATR_REGIME_WINDOW=0  # Set to 200 to enable ATR regime filter
ATR_REGIME_PCT=0  # Set to 30 for 30th percentile threshold
MIN_MA_DIST_BPS=0  # Minimum MA distance in basis points
MAX_SPREAD_PIPS=3  # Max spread in pips (0=disabled)
ADX_SLOPE_MIN=0  # Minimum ADX slope (0=disabled)

# ===== MULTI-TIMEFRAME (OPTIONAL) =====
MTF_ENABLE=false  # Enable higher timeframe trend filter
MTF_TF=1H  # Higher timeframe (1H, 4H, 1D)
MTF_TREND_MA=200  # Trend MA on higher timeframe

# ===== FILES =====
STATE_FILE=fxify_bot_state.json
LOG_DIR=logs

# ===== DEBUG =====
LOOP_ONCE=false  # Set to true for single iteration test
